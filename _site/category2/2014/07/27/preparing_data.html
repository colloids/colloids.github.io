<!DOCTYPE html>
<html>
  <head>
    <title>Colloid Physics in Space - Colloid Physics on the International Space Station</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
    <link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/css/style.css" rel="stylesheet" media="screen">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <script src="https://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
    <script src="/js/bootstrap.js"></script>
    <script src="/js/jquery.isotope.js" type="text/javascript"></script> 
    <script type='text/javascript' src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.7.1/modernizr.min.js"></script>
    <script src="/js/css3-mediaqueries.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
      <div id='content'>
        <div class="header">
  <div class="container">
    <a class="pull-left logo col-sm-6" href="https://colloids.github.io">
      <p>Colloid Physics in Space</p>
    </a>
    <p class="pull-right tagline col-sm-6 hidden-xs">updates from ACE aboard ISS by <a href="http://www.peterlu.org/" target="_blank">Peter J Lu</a></p>
  </div> <!-- /.container -->
</div> <!-- /.header -->

<div class="ticker">
<div class="container">
  <div id="carousel-home" class="carousel slide" data-ride="carousel">
          <div class="row">
            <div class="col-sm-1 hidden-xs">
                <a class="right carousel-control" href="#carousel-home" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
              </a>
            </div>
              <div class="col-sm-10 headline">
                  <div class="carousel-inner">
                    
                      <div class="item active">
                          <div class="carousel-content">
                              <div>
                                  <a href="/category2/2014/09/09/stop_work.html"><p>During operations, NASA eliminates our funding for the rest of the year</p></a>
                              </div>
                          </div>
                      </div>
                    
                    
                      <div class="item">
                          <div class="carousel-content">
                              <div>
                                  <a href="/category1/2014/09/05/slow_phase_sep.html"><p>Significant science, slower phase separation in ACE than in BCAT-KP</p></a>
                              </div>
                          </div>
                      </div>
                    
                      <div class="item">
                          <div class="carousel-content">
                              <div>
                                  <a href="/category3/2014/08/26/same_sample.html"><p>Same sample, different behavior?</p></a>
                              </div>
                          </div>
                      </div>
                    
                      <div class="item">
                          <div class="carousel-content">
                              <div>
                                  <a href="/category2/2014/08/22/gelation_phase_sep.html"><p>Significant science, gelation and phase separation</p></a>
                              </div>
                          </div>
                      </div>
                    
                      <div class="item">
                          <div class="carousel-content">
                              <div>
                                  <a href="/category1/2014/08/21/stabilize_images.html"><p>Image stabilization and filtering</p></a>
                              </div>
                          </div>
                      </div>
                    
                  </div> <!-- .carousel-inner -->
              </div> <!-- .col-sm-10 -->
              <div class="col-sm-1 hidden-xs">
                <a class="left carousel-control" href="#carousel-home" role="button" data-slide="next" style="margin-right:15px;">
                  <span class="glyphicon glyphicon-chevron-right"></span>
                </a>
              </div>
        </div> <!-- .row-->
    </div> <!-- .carousel-->
</div> <!-- .container-->
</div> <!-- .ticker-->


<div class="container">
	<article>
	<h1 id="first-time-sequence-data-from-iss">First time sequence data from ISS</h1>

<p>We think that the samples we are looking at in the current run (the fourth) on ISS with ACE-M2 are undergoing phase separation and gelation, based on ground studies and preliminary images from orbit. To understand how these samples evolve over time, we perform nominally the same procedure—collecting images from the same positions, magnifications, depths, at similar settings—each day we run the experiment. In principle, then the images from successive days should have the same (or at least very close) brightness and contrast, and should overlay on top of each other exactly. To see whether this is happening in practice, here is the raw sequence of 10x composite images of sample 22 (platter 2105, strip B618, well 4) taken on days 2, 3, 5, 8, 11 and 15:</p>

<p><img src="/images/2014_07_27_ace_m2_run4_s22_gel/w9s22_10x_days02to15_resize.gif" alt="10x composite, raw images" /></p>

<p><img src="/images/ace_m2_sample_tiles/sample22.png" alt="" /></p>

<p>The position shifts slightly, and the brightness changes. Clearly, the images are not exactly aligned, and the motion distracts from being able to watch any evolution in the sample, as well as interfering with any automated analysis.</p>

<h2 id="pre-processing-image-data">Pre-processing image data</h2>

<p>To fix these issues, I will align the images within the time sequence, and match their brightnesses so that the intensity doesn’t change so dramatically.</p>

<h3 id="aligning-the-images">Aligning the images</h3>

<p>The first major task is to align the images from subsequent days of data collection. I first <a href="/category1/2014/07/15/whereis_data.html">rename the files</a>, then in Photoshop CS6 import the set of images into separate layers in a composite image, with <code>File &gt; Scripts &gt; Load Files into Stack...</code>, enabling the option to <code>Attempt to Automatically Align Source Images</code>. This works pretty well for these images, where the overall shape of the well can guide the alignment algorithm. </p>

<p>This process is not fast, taking several seconds per image, but for just a handful of images, it works well enough. By contrast, for BCAT, where we have hundreds of frames, I create an image sequence movie in Adobe After Effects, and use the tracking features there to far more quickly do the alignment.</p>

<p>I then crop the images so that there are no blank borders, and save the file as a mult-layer <code>.psd</code> file.</p>

<h3 id="matching-intensities">Matching intensities</h3>

<p>For color images, the Photoshop feature <code>Match Color...</code> is very good and extremely helpful. In our case, however, grayscale images do not have the same feature, and the option is unavailable. Instead, using a combination of <code>Levels</code> and ```Curves, I adjust each image to have the same mean (a little over 100 in 8-bit grayscale values) and standard deviation (about 60 8-bit grayscale levels). </p>

<h3 id="building-the-animation">Building the animation</h3>

<p>In the <code>Timeline</code> palette, I <code>Create Frame Animation</code>, then in the drop-down menu select <code>Make Frames from Layers</code>. The great thing about this feature is that it otherwise doesn’t affect anything about the image or its layers. The final step is to export to an animated <code>.gif</code> file, using the <code>Save for Web...</code> dialog box. There I reduce to final web resolution, and create the final file:</p>

<p><img src="/images/2014_07_27_ace_m2_run4_s22_gel/w9s22_10x_days02to15.gif" alt="10x composite, aligned images" /></p>

<h2 id="higher-magnification">Higher magnification</h2>

<p>I apply the same procedure to the higher-magnification 40x composite. First, the raw data (just resized):</p>

<p><img src="/images/2014_07_27_ace_m2_run4_s22_gel/w9s22_40x_60um_days04to15_resize.gif" alt="40x composite, raw images" /></p>

<p>And then the corrected version, where the aligned images have a mean of 128 and standard deviation of 40 8-bit grayscale levels:</p>

<p><img src="/images/2014_07_27_ace_m2_run4_s22_gel/w9s22_40x_60um_days04to15.gif" alt="40x composite, aligned images" /></p>

<h2 id="stage-reproducibility-or-drift">Stage reproducibility or drift?</h2>

<p>Several things are apparent from these sequences. First, the stage is not perfectly reproducible from a mechanical standpoint. The composites seem to move around a little bit, likely due to mechanical backlash in the stage. Second, intensities are not constant from day to day.</p>


	</article>
</div>

<footer class="footer">
<div class="container">
  <div><p>This work by <a href="http://www.peterlu.org/" target="_blank">Peter J. Lu</a> is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 Intl License &nbsp;/&nbsp; <a href="http://jessicaoverbey.com/" target="_blank">Site Design</a><p></div>
</div>
</footer>

<script type="text/javascript">

   $(window).load(function(){
    var $container = $('.portfolioContainer');
    $container.isotope({
        filter: '*',
        animationOptions: {
            duration: 750,
            easing: 'linear',
            queue: false
        }

    });
 
    $('.sort a').click(function(){
        $('.sort .current').removeClass('current');
        $(this).addClass('current');
 
        var selector = $(this).attr('data-filter');
        $container.isotope({
            filter: selector,
            animationOptions: {
                duration: 750,
                easing: 'linear',
                queue: false
            }
         });
         return false;
    }); 
});

</script>


      </div>

  </body>
</html>
